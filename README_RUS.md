[![Build Status](https://travis-ci.org/datamoth/datamoth.svg?branch=master)](https://travis-ci.org/datamoth/datamoth)

### Что такое datamot?

Datamot упрощает создание батч джобов и решает большинство проблем
которые возникают при развертывании их в Hadoop / Oozie.

### Хорошо ... Так что это?

Datamot поможет вам организовать ваш Data Analysis код в проект и развернуть
весь проект в виде джобов Hadoop. Вам не нужно копировать файлы в HDFS и
заменять переменные в конфигурации. Нет скриптов. Просто запушьте свой код в git
как вы делаете это всегда, и ву-а-ля!

### Хм .. что-нибудь еще?

Автоматический запуск / остановка джобов. Простая централизованная конфигурация
проекта. Профили конфигурации (prod, test, что угодно). Свобода в
структурировании проекта. Плагины и многое другое.

### Вы собираетесь продать его мне???

Нет. Мы далеки от маркетинга, мы инженеры. Просто установите первую
версию datamot, и вы получите 50% скидку на следующую версию.

### Что? Разве это не бесплатный инструмент?

Бесплатный и это бесплатно даже для коммерческого использования.

### Ну .. Хорошо, как его установить?

Datamot состоит из двух частей: cli tool (который вы можете использовать, но не
обязаны) и супер простой веб-интерфейс. Когда вы запускаете веб-интерфейс в
первый раз он создаст пустые репозитории git, на каждый проект указанный в
конфиг файле.

Затем вы просто пушите свой код в эти репозитории и он автоматом разворачивается
на кластере. Это CI, но не только. Это много больше. Вся конфигурация кластера
хранится в специальном .conf файле conf в каждом проекте. После того как вы
запушили проект в репу датамота, можно будет смотреть его через интерфейс,
отслеживать зависимости джобов, из запуски, зависимости датасетов их размеры,
перемещаться по своему проекту (наборы данных, координаторы, рабочие процессы,
код), что очень помогает при устранении ошибок и разборе проблем.

### Просто скажите, как его установить.

Загрузите дистрибутив. Распакуйте его. Запустите `datamot/bin/datamot --start`.

### А как установить его правильно?

Обычно необходимо установливать datamot на какой-либо сервер, который доступен
для пуша через ssh для вас и ваших товарищей по команде. Ваш кластер hadoop и
его службы, например Oozie, HDFS должны быть доступны с этого сервера. И было бы
просто клёво создать выделенного пользователя на этом сервере для запуска
datamot.

После создания пользователя (или принятия решения об использовании
существующего) распакуйте datamot в любое место, и добавьте в папку `bin` в
PATH. Например, вы распаковали его в `/home/datamot/datamot`, тогда вам нужно
поправить .bashrc: `$PATH=/home/datamot/datamot/bin/:$PATH`

Теперь `datamot --version` должен работать из любой папки. Если вы собираетесь
использовать UI (мы рекомендуем вам использовать его) просто запустите
`datamot --start`. В настоящее время мы работаем над установкой datamot в
качестве сервиса. Пока вы можете использовать screen для запуска отсоединенного
datamot вот так:

`screen -dmS datamot datamot --start`

Вы можете изменить ip по умолчанию и порт, на котором будет слушать
datamot. Настройки хранятся в
`conf/datamot.conf`.

`remoteUser` является пользователем ssh, под которым вы собираетесь
использовать git,
`remoteHost` - это хост для пуша,

эти две переменные необходимы для отображения URL-адреса пуша в UI.

### Готово ли это к prod'у?

Мы используем его на prod-е. Сейчас это ранний альфа-релиз и нам очень нужно
собрать больше отзывов, так что пишите нам о вашем опыте и проблемах.

### Получил и работает, что дальше?

Давайте создадим простой coordinator...

### Подождите ... Что такое координатор?

Ну, существует несколько оркестраторов джобов для Hadoop. Один из лучших (наше
мнение) - Oozie. Вы знаете, это как контейнер для ваших скриптов (python, pig,
hive-sql, что угодно ещё), копируете скрипты в Hadoop, указываете время и
периодичность запусков и Oozie будет осуществлять эти запуски.

### Почему Oozie?

Он декларативный и идеально согласуется с современным immutable подходом к
проектированию архитектур обработки данных.  У него для этого есть все
необходимые сущности, которые помогут вам моделировать ваши расчеты: датасеты,
джобы, планировщики расписаний и зависимости между ними (сущностями).

### Итак, что такое координатор?

Вам лучше посмотреть официальные документы Oozie. Это отличный инструмент!
http://oozie.apache.org/.

### Как запустить что-то на кластере Hadoop, в конце концов?

Мы подготовим тестовый проект для Hadoop / Oozie / Spark / Hive с несколькими
координаторами и простыми вычислениями. Просто склонируйте его и запушьте в репу
вашего датамота.Но перед этим поправьте конфиг в соответствии с конфигурацией
вашего кластера.

### Круто. Мне нужна фича.

Круто! Создайте issue!

### Помогите. Мне нужна помощь.

Используйте issue. Или напишите нам в телеграм [Telegram](https://t.me/datamot).
